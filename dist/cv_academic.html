<!DOCTYPE html>
<html lang="en"><head>
<script src="cv_academic_files/libs/clipboard/clipboard.min.js"></script>
<script src="cv_academic_files/libs/quarto-html/quarto.js" type="module"></script>
<script src="cv_academic_files/libs/quarto-html/tabsets/tabsets.js" type="module"></script>
<script src="cv_academic_files/libs/quarto-html/axe/axe-check.js" type="module"></script>
<script src="cv_academic_files/libs/quarto-html/popper.min.js"></script>
<script src="cv_academic_files/libs/quarto-html/tippy.umd.min.js"></script>
<script src="cv_academic_files/libs/quarto-html/anchor.min.js"></script>
<link href="cv_academic_files/libs/quarto-html/tippy.css" rel="stylesheet">
<link href="cv_academic_files/libs/quarto-html/quarto-syntax-highlighting-dc55a5b9e770e841cd82e46aadbfb9b0.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="cv_academic_files/libs/bootstrap/bootstrap.min.js"></script>
<link href="cv_academic_files/libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="cv_academic_files/libs/bootstrap/bootstrap-d6a003b94517c951b2d65075d42fb01b.min.css" rel="stylesheet" append-hash="true" id="quarto-bootstrap" data-mode="light"><meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Prof.&nbsp;Barry Quinn</title>
        <link rel="stylesheet" href="../assets/custom-styles.css">
        </head>
<body class="bg-gray-100 fullcontent quarto-light">
    <header class="bg-white shadow-md p-6 mb-6 flex flex-col md:flex-row justify-between items-center">
        <div>
            <h1 class="text-3xl font-bold text-gray-800">Prof.&nbsp;Barry Quinn</h1>
            <p class="text-xl text-gray-600">Professor of Finance and Financial Technology</p>
        </div>
        <div class="headshot-container mt-4 md:mt-0">
            <img src="img/head_shot.png" alt="Prof.&nbsp;Barry Quinn" class="headshot">
        </div>
    </header>

    <main class="bg-white shadow-md p-6">
        <section id="contact-information" class="level1">
        <h1>Contact Information</h1>
        <ul>
        <li><strong>Address</strong>: Ulster University Business School, Belfast Campus, York Street, Belfast, BT1 5AB, N. Ireland</li>
        <li><strong>Email</strong>: b.quinn1@ulster.ac.uk</li>
        <li><strong>GitHub</strong>: <a href="https://github.com/quinfer">quinfer</a></li>
        <li><strong>ORCID</strong>: <a href="https://orcid.org/0000-0002-8637-9060">0000-0002-8637-9060</a></li>
        <li><strong>Date of Birth</strong>: 10 July 1973</li>
        </ul>
        </section>
        <section id="personal-statement" class="level1">
        <h1>Personal Statement</h1>
        <p>Professor Barry Quinn is Professor of Finance &amp; Financial Technology at Ulster University Business School and Director of the Centre for Finance and Responsible Technology. The Centre is guided by three pillars: statistical rigour and intellectual humility; practical industry relevance; and responsible algorithmic innovation.</p>
        <p>Barry is a Chartered Statistician and views econometrics as an applied statistical science. His work emphasises explicit assumptions, uncertainty quantification, and stress-testing—so claims remain proportionate to evidence. He values transparency and reproducibility, and focuses on methods that remain interpretable and auditable when used in real decision settings.</p>
        <p>His research sits at the intersection of finance, statistical learning, and responsible use of algorithms, addressing markets and institutions, risk measurement, and evidence for regulation and compliance. He teaches across quantitative finance, econometrics, and AI applications in finance, emphasising ethical practice, reproducibility, and critical thinking.</p>
        <p>Before entering academia, Barry worked in financial markets, specialising in currency trading and liquidity management. He holds a PhD in Finance and an MSc in Artificial Intelligence (Distinction) from Queen’s University Belfast, and works with external partners to ensure research translates into robust practice.</p>
        <section id="education-and-professional-qualifications" class="level2">
        <h2 class="anchored" data-anchor-id="education-and-professional-qualifications">Education and Professional Qualifications</h2>
        <table class="caption-top table">
        <colgroup>
        <col style="width: 56%">
        <col style="width: 36%">
        <col style="width: 6%">
        </colgroup>
        <thead>
        <tr class="header">
        <th style="text-align: left;">Degree</th>
        <th style="text-align: left;">Institution</th>
        <th style="text-align: left;">Year</th>
        </tr>
        </thead>
        <tbody>
        <tr class="odd">
        <td style="text-align: left;">B.Sc.(Hons) Accounting and Finance</td>
        <td style="text-align: left;">Queen’s University Belfast</td>
        <td style="text-align: left;">1995</td>
        </tr>
        <tr class="even">
        <td style="text-align: left;">MSc Quantitative Finance</td>
        <td style="text-align: left;">RMIT University Melbourne</td>
        <td style="text-align: left;">2006</td>
        </tr>
        <tr class="odd">
        <td style="text-align: left;">Ph.D.&nbsp;Finance</td>
        <td style="text-align: left;">Queen’s University Belfast</td>
        <td style="text-align: left;">2012</td>
        </tr>
        <tr class="even">
        <td style="text-align: left;">Chartered Statistician</td>
        <td style="text-align: left;">Royal Statistical Society</td>
        <td style="text-align: left;">2019</td>
        </tr>
        <tr class="odd">
        <td style="text-align: left;">Advanced Data Science Professional</td>
        <td style="text-align: left;">Royal Statistical Society</td>
        <td style="text-align: left;">2023</td>
        </tr>
        <tr class="even">
        <td style="text-align: left;">MSc Artificial Intelligence (Distinction)</td>
        <td style="text-align: left;">Queen’s University Belfast</td>
        <td style="text-align: left;">2025</td>
        </tr>
        </tbody>
        </table>
        </section>
        </section>
        <section id="research-excellence" class="level1">
        <h1>Research Excellence</h1>
        <section id="key-publications-selected-from-14-peer-reviewed-papers" class="level2">
        <h2 class="anchored" data-anchor-id="key-publications-selected-from-14-peer-reviewed-papers">Key Publications (Selected from 14 peer-reviewed papers)</h2>
        <p><strong>ABS4* Journal:</strong> - Liu, Weilong, Zhang, Yong, Liu, Kailong, Quinn, Barry, Yang, Xingyu, Peng, Qiao (2024). Evolutionary Multi-Objective Optimisation for Large-Scale Portfolio Selection With Both Random and Uncertain Returns. <em>IEEE Transactions on Evolutionary Computation</em> (ABS4)</p>
        <p><strong>Recent ABS3 Publications:</strong> - McKillop, Donal, Liu, Kailong, Quinn, Barry, Peng, Qiao (Forthcoming). Modelling and Predicting Credit Union Failures. <em>International Journal of Forecasting</em> (ABS3) - Bouri, E., Quinn, B., Sheenan, L. &amp; Tang, Y. (2024). Investigating extreme linkage topology in the aerospace and defence industry. <em>International Review of Financial Analysis</em> (ABS3) - Quinn, Barry, Gallagher, Ronan, Kuosmanen, Timo (2023). Lurking in the shadows: The impact of CO2 emissions target setting on carbon pricing in the Kyoto agreement period. <em>Energy Economics</em> (ABS3)</p>
        </section>
        <section id="research-impact-and-funding" class="level2">
        <h2 class="anchored" data-anchor-id="research-impact-and-funding">Research Impact and Funding</h2>
        <div class="cell">
        <div id="tbl-research-grants-academic" class="cell quarto-float quarto-figure quarto-figure-center anchored">
        <figure class="quarto-float quarto-float-tbl figure">
        <figcaption class="quarto-float-caption-top quarto-float-caption quarto-float-tbl" id="tbl-research-grants-academic-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
        Table&nbsp;1: Major Research Grants (Selected)
        </figcaption>
        <div aria-describedby="tbl-research-grants-academic-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
        <div class="cell-output-display">
        <table class="do-not-create-environment cell caption-top table table-sm table-striped small">
        <colgroup>
        <col style="width: 23%">
        <col style="width: 6%">
        <col style="width: 8%">
        <col style="width: 56%">
        <col style="width: 5%">
        </colgroup>
        <thead>
        <tr class="header">
        <th style="text-align: left;">Funding Body</th>
        <th style="text-align: left;">Role</th>
        <th style="text-align: left;">Period</th>
        <th style="text-align: left;">Project Title</th>
        <th style="text-align: left;">Value</th>
        </tr>
        </thead>
        <tbody>
        <tr class="odd">
        <td style="text-align: left;">Department of the Economy NI</td>
        <td style="text-align: left;">PI</td>
        <td style="text-align: left;">2025</td>
        <td style="text-align: left;">Three PhD Scholarships - Centre for Finance and Responsible Technology</td>
        <td style="text-align: left;">£360K</td>
        </tr>
        <tr class="even">
        <td style="text-align: left;">UKRI/InnovateUK</td>
        <td style="text-align: left;">PI</td>
        <td style="text-align: left;">2024-2025</td>
        <td style="text-align: left;">Understanding and Enhancing regulatory compliance using AI</td>
        <td style="text-align: left;">£250K</td>
        </tr>
        <tr class="odd">
        <td style="text-align: left;">InnovateUK</td>
        <td style="text-align: left;">PI</td>
        <td style="text-align: left;">2021-2023</td>
        <td style="text-align: left;">Tail Risk Analytics and Stress Testing</td>
        <td style="text-align: left;">£180K</td>
        </tr>
        <tr class="even">
        <td style="text-align: left;">InnovateUK</td>
        <td style="text-align: left;">Co-I</td>
        <td style="text-align: left;">2017-2019</td>
        <td style="text-align: left;">AI and Advanced Retail Analytics</td>
        <td style="text-align: left;">£150K</td>
        </tr>
        <tr class="odd">
        <td style="text-align: left;">Various KTPs</td>
        <td style="text-align: left;">PI/Co-I</td>
        <td style="text-align: left;">2017-2023</td>
        <td style="text-align: left;">Multiple Knowledge Transfer Partnerships</td>
        <td style="text-align: left;">£800K+</td>
        </tr>
        </tbody>
        </table>
        </div>
        </div>
        </figure>
        </div>
        </div>
        </section>
        <section id="working-papers" class="level2">
        <h2 class="anchored" data-anchor-id="working-papers">Working Papers</h2>
        <ul>
        <li>Dai, Yongsheng, Quinn, Barry, Kearney, Fearghal (2025). <em>Signal Amplification in Market Manipulation Detection</em>. Working paper.</li>
        <li>Dai, Yongsheng, Quinn, Barry, Kearney, Fearghal, Liu, Weilong, Spence, Ivor, Rafferty, Karen, Wang, Hui (2025). <em>Detecting Market Manipulation with Self-supervised Learning: A Hybrid Framework Using Frequency-based Synthetic Anomaly and Domain-Specific Features</em>. Working paper.</li>
        <li>Quinn, Barry (2023). <em>Explaining AI in Finance: Past, Present, Prospects</em>. arXiv preprint arXiv:2306.02773.</li>
        </ul>
        </section>
        <section id="phd-supervision-excellence" class="level2">
        <h2 class="anchored" data-anchor-id="phd-supervision-excellence">PhD Supervision Excellence</h2>
        <p><strong>Completed Supervisions (6):</strong> - Dr.&nbsp;Jiadong Liu (2018): <em>Momentum in Empirical Asset Pricing</em> - Dr.&nbsp;Ashleigh Neil (2019): <em>Law and Financial Stability</em> - Dr.&nbsp;Colm Kelly (2021): <em>Machine Learning in Empirical Asset Pricing</em> - Dr.&nbsp;Qiao Peng (2021): <em>US Credit Union Mergers: Causes and Consequences</em> - Dr.&nbsp;Kevin Johnson (2019): <em>Industrial Consolidation: The Irish Credit Union Sector</em> - Veronica Zhang (2024): <em>Capital Policy and State Sponsorship in Chinese Banking</em></p>
        <p><strong>Current Supervisions (6):</strong> Including students working on AI applications in finance, sustainable investing, and computational approaches to financial regulation.</p>
        </section>
        </section>
        <section id="teaching-and-academic-leadership" class="level1">
        <h1>Teaching and Academic Leadership</h1>
        <section id="teaching-excellence" class="level2">
        <h2 class="anchored" data-anchor-id="teaching-excellence">Teaching Excellence</h2>
        <ul>
        <li><strong>Programme Director</strong>, MSc Quantitative Finance (2018-2022)</li>
        <li><strong>Programme Director</strong>, MSc Computational Finance &amp; Trading (2014-2018)</li>
        <li><strong>Co-Founder</strong>, Queen’s Student Managed Fund (2012-2024)</li>
        <li><strong>Teaching Award</strong>, QUB (2016)</li>
        </ul>
        <p><strong>Current Modules</strong>: Financial Data Science; Causal AI; AI in Trading; Financial Econometrics</p>
        </section>
        <section id="academic-service" class="level2">
        <h2 class="anchored" data-anchor-id="academic-service">Academic Service</h2>
        <ul>
        <li><strong>Co-founder</strong>, Finance and AI Research Lab (with Dr Fearghal Kearney), Queen’s University Belfast (2022-2024)</li>
        <li><strong>Programme Director</strong>, MSc Quantitative Finance (2018-2022)</li>
        <li><strong>Lead Developer</strong>, Queen’s Business School Remote Analytics Lab Platform</li>
        <li><strong>Organiser</strong>, Symposium on AI and Future of Financial Regulation (2023)</li>
        </ul>
        </section>
        </section>
        <section id="professional-experience" class="level1">
        <h1>Professional Experience</h1>
        </section>
        <section id="professional-recognition" class="level1">
        <h1>Professional Recognition</h1>
        <ul>
        <li><strong>Chartered Statistician</strong>, Royal Statistical Society (2019)</li>
        <li><strong>Advanced Data Science Professional</strong>, Royal Statistical Society (2023)</li>
        <li><strong>1st Place</strong>, CFA European Quantitative Finance Awards (2018)</li>
        <li><strong>Associate Research Fellow</strong>, QUB Momentum One Zero (2021-2024)</li>
        </ul>
        <hr>
        <p><em>Full publication list and detailed CV available upon request</em></p>
        </section>
    </main>

    <footer class="mt-6 text-center">
        <a href="index.pdf" class="download-btn">Download PDF Version</a>
    </footer>

        
        <!-- /main column -->
        <script id="quarto-html-after-body" type="application/javascript">
          window.document.addEventListener("DOMContentLoaded", function (event) {
            const icon = "";
            const anchorJS = new window.AnchorJS();
            anchorJS.options = {
              placement: 'right',
              icon: icon
            };
            anchorJS.add('.anchored');
            const isCodeAnnotation = (el) => {
              for (const clz of el.classList) {
                if (clz.startsWith('code-annotation-')) {                     
                  return true;
                }
              }
              return false;
            }
            const onCopySuccess = function(e) {
              // button target
              const button = e.trigger;
              // don't keep focus
              button.blur();
              // flash "checked"
              button.classList.add('code-copy-button-checked');
              var currentTitle = button.getAttribute("title");
              button.setAttribute("title", "Copied!");
              let tooltip;
              if (window.bootstrap) {
                button.setAttribute("data-bs-toggle", "tooltip");
                button.setAttribute("data-bs-placement", "left");
                button.setAttribute("data-bs-title", "Copied!");
                tooltip = new bootstrap.Tooltip(button, 
                  { trigger: "manual", 
                    customClass: "code-copy-button-tooltip",
                    offset: [0, -8]});
                tooltip.show();    
              }
              setTimeout(function() {
                if (tooltip) {
                  tooltip.hide();
                  button.removeAttribute("data-bs-title");
                  button.removeAttribute("data-bs-toggle");
                  button.removeAttribute("data-bs-placement");
                }
                button.setAttribute("title", currentTitle);
                button.classList.remove('code-copy-button-checked');
              }, 1000);
              // clear code selection
              e.clearSelection();
            }
            const getTextToCopy = function(trigger) {
              const outerScaffold = trigger.parentElement.cloneNode(true);
              const codeEl = outerScaffold.querySelector('code');
              for (const childEl of codeEl.children) {
                if (isCodeAnnotation(childEl)) {
                  childEl.remove();
                }
              }
              return codeEl.innerText;
            }
            const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
              text: getTextToCopy
            });
            clipboard.on('success', onCopySuccess);
            if (window.document.getElementById('quarto-embedded-source-code-modal')) {
              const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
                text: getTextToCopy,
                container: window.document.getElementById('quarto-embedded-source-code-modal')
              });
              clipboardModal.on('success', onCopySuccess);
            }
              var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
              var mailtoRegex = new RegExp(/^mailto:/);
                var filterRegex = new RegExp('/' + window.location.host + '/');
              var isInternal = (href) => {
                  return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
              }
              // Inspect non-navigation links and adorn them if external
             var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
              for (var i=0; i<links.length; i++) {
                const link = links[i];
                if (!isInternal(link.href)) {
                  // undo the damage that might have been done by quarto-nav.js in the case of
                  // links that we want to consider external
                  if (link.dataset.originalHref !== undefined) {
                    link.href = link.dataset.originalHref;
                  }
                }
              }
            function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
              const config = {
                allowHTML: true,
                maxWidth: 500,
                delay: 100,
                arrow: false,
                appendTo: function(el) {
                    return el.parentElement;
                },
                interactive: true,
                interactiveBorder: 10,
                theme: 'quarto',
                placement: 'bottom-start',
              };
              if (contentFn) {
                config.content = contentFn;
              }
              if (onTriggerFn) {
                config.onTrigger = onTriggerFn;
              }
              if (onUntriggerFn) {
                config.onUntrigger = onUntriggerFn;
              }
              window.tippy(el, config); 
            }
            const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
            for (var i=0; i<noterefs.length; i++) {
              const ref = noterefs[i];
              tippyHover(ref, function() {
                // use id or data attribute instead here
                let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
                try { href = new URL(href).hash; } catch {}
                const id = href.replace(/^#\/?/, "");
                const note = window.document.getElementById(id);
                if (note) {
                  return note.innerHTML;
                } else {
                  return "";
                }
              });
            }
            const xrefs = window.document.querySelectorAll('a.quarto-xref');
            const processXRef = (id, note) => {
              // Strip column container classes
              const stripColumnClz = (el) => {
                el.classList.remove("page-full", "page-columns");
                if (el.children) {
                  for (const child of el.children) {
                    stripColumnClz(child);
                  }
                }
              }
              stripColumnClz(note)
              if (id === null || id.startsWith('sec-')) {
                // Special case sections, only their first couple elements
                const container = document.createElement("div");
                if (note.children && note.children.length > 2) {
                  container.appendChild(note.children[0].cloneNode(true));
                  for (let i = 1; i < note.children.length; i++) {
                    const child = note.children[i];
                    if (child.tagName === "P" && child.innerText === "") {
                      continue;
                    } else {
                      container.appendChild(child.cloneNode(true));
                      break;
                    }
                  }
                  if (window.Quarto?.typesetMath) {
                    window.Quarto.typesetMath(container);
                  }
                  return container.innerHTML
                } else {
                  if (window.Quarto?.typesetMath) {
                    window.Quarto.typesetMath(note);
                  }
                  return note.innerHTML;
                }
              } else {
                // Remove any anchor links if they are present
                const anchorLink = note.querySelector('a.anchorjs-link');
                if (anchorLink) {
                  anchorLink.remove();
                }
                if (window.Quarto?.typesetMath) {
                  window.Quarto.typesetMath(note);
                }
                if (note.classList.contains("callout")) {
                  return note.outerHTML;
                } else {
                  return note.innerHTML;
                }
              }
            }
            for (var i=0; i<xrefs.length; i++) {
              const xref = xrefs[i];
              tippyHover(xref, undefined, function(instance) {
                instance.disable();
                let url = xref.getAttribute('href');
                let hash = undefined; 
                if (url.startsWith('#')) {
                  hash = url;
                } else {
                  try { hash = new URL(url).hash; } catch {}
                }
                if (hash) {
                  const id = hash.replace(/^#\/?/, "");
                  const note = window.document.getElementById(id);
                  if (note !== null) {
                    try {
                      const html = processXRef(id, note.cloneNode(true));
                      instance.setContent(html);
                    } finally {
                      instance.enable();
                      instance.show();
                    }
                  } else {
                    // See if we can fetch this
                    fetch(url.split('#')[0])
                    .then(res => res.text())
                    .then(html => {
                      const parser = new DOMParser();
                      const htmlDoc = parser.parseFromString(html, "text/html");
                      const note = htmlDoc.getElementById(id);
                      if (note !== null) {
                        const html = processXRef(id, note);
                        instance.setContent(html);
                      } 
                    }).finally(() => {
                      instance.enable();
                      instance.show();
                    });
                  }
                } else {
                  // See if we can fetch a full url (with no hash to target)
                  // This is a special case and we should probably do some content thinning / targeting
                  fetch(url)
                  .then(res => res.text())
                  .then(html => {
                    const parser = new DOMParser();
                    const htmlDoc = parser.parseFromString(html, "text/html");
                    const note = htmlDoc.querySelector('main.content');
                    if (note !== null) {
                      // This should only happen for chapter cross references
                      // (since there is no id in the URL)
                      // remove the first header
                      if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
                        note.children[0].remove();
                      }
                      const html = processXRef(null, note);
                      instance.setContent(html);
                    } 
                  }).finally(() => {
                    instance.enable();
                    instance.show();
                  });
                }
              }, function(instance) {
              });
            }
                let selectedAnnoteEl;
                const selectorForAnnotation = ( cell, annotation) => {
                  let cellAttr = 'data-code-cell="' + cell + '"';
                  let lineAttr = 'data-code-annotation="' +  annotation + '"';
                  const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
                  return selector;
                }
                const selectCodeLines = (annoteEl) => {
                  const doc = window.document;
                  const targetCell = annoteEl.getAttribute("data-target-cell");
                  const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
                  const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
                  const lines = annoteSpan.getAttribute("data-code-lines").split(",");
                  const lineIds = lines.map((line) => {
                    return targetCell + "-" + line;
                  })
                  let top = null;
                  let height = null;
                  let parent = null;
                  if (lineIds.length > 0) {
                      //compute the position of the single el (top and bottom and make a div)
                      const el = window.document.getElementById(lineIds[0]);
                      top = el.offsetTop;
                      height = el.offsetHeight;
                      parent = el.parentElement.parentElement;
                    if (lineIds.length > 1) {
                      const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
                      const bottom = lastEl.offsetTop + lastEl.offsetHeight;
                      height = bottom - top;
                    }
                    if (top !== null && height !== null && parent !== null) {
                      // cook up a div (if necessary) and position it 
                      let div = window.document.getElementById("code-annotation-line-highlight");
                      if (div === null) {
                        div = window.document.createElement("div");
                        div.setAttribute("id", "code-annotation-line-highlight");
                        div.style.position = 'absolute';
                        parent.appendChild(div);
                      }
                      div.style.top = top - 2 + "px";
                      div.style.height = height + 4 + "px";
                      div.style.left = 0;
                      let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
                      if (gutterDiv === null) {
                        gutterDiv = window.document.createElement("div");
                        gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
                        gutterDiv.style.position = 'absolute';
                        const codeCell = window.document.getElementById(targetCell);
                        const gutter = codeCell.querySelector('.code-annotation-gutter');
                        gutter.appendChild(gutterDiv);
                      }
                      gutterDiv.style.top = top - 2 + "px";
                      gutterDiv.style.height = height + 4 + "px";
                    }
                    selectedAnnoteEl = annoteEl;
                  }
                };
                const unselectCodeLines = () => {
                  const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
                  elementsIds.forEach((elId) => {
                    const div = window.document.getElementById(elId);
                    if (div) {
                      div.remove();
                    }
                  });
                  selectedAnnoteEl = undefined;
                };
                  // Handle positioning of the toggle
              window.addEventListener(
                "resize",
                throttle(() => {
                  elRect = undefined;
                  if (selectedAnnoteEl) {
                    selectCodeLines(selectedAnnoteEl);
                  }
                }, 10)
              );
              function throttle(fn, ms) {
              let throttle = false;
              let timer;
                return (...args) => {
                  if(!throttle) { // first call gets through
                      fn.apply(this, args);
                      throttle = true;
                  } else { // all the others get throttled
                      if(timer) clearTimeout(timer); // cancel #2
                      timer = setTimeout(() => {
                        fn.apply(this, args);
                        timer = throttle = false;
                      }, ms);
                  }
                };
              }
                // Attach click handler to the DT
                const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
                for (const annoteDlNode of annoteDls) {
                  annoteDlNode.addEventListener('click', (event) => {
                    const clickedEl = event.target;
                    if (clickedEl !== selectedAnnoteEl) {
                      unselectCodeLines();
                      const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
                      if (activeEl) {
                        activeEl.classList.remove('code-annotation-active');
                      }
                      selectCodeLines(clickedEl);
                      clickedEl.classList.add('code-annotation-active');
                    } else {
                      // Unselect the line
                      unselectCodeLines();
                      clickedEl.classList.remove('code-annotation-active');
                    }
                  });
                }
            const findCites = (el) => {
              const parentEl = el.parentElement;
              if (parentEl) {
                const cites = parentEl.dataset.cites;
                if (cites) {
                  return {
                    el,
                    cites: cites.split(' ')
                  };
                } else {
                  return findCites(el.parentElement)
                }
              } else {
                return undefined;
              }
            };
            var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
            for (var i=0; i<bibliorefs.length; i++) {
              const ref = bibliorefs[i];
              const citeInfo = findCites(ref);
              if (citeInfo) {
                tippyHover(citeInfo.el, function() {
                  var popup = window.document.createElement('div');
                  citeInfo.cites.forEach(function(cite) {
                    var citeDiv = window.document.createElement('div');
                    citeDiv.classList.add('hanging-indent');
                    citeDiv.classList.add('csl-entry');
                    var biblioDiv = window.document.getElementById('ref-' + cite);
                    if (biblioDiv) {
                      citeDiv.innerHTML = biblioDiv.innerHTML;
                    }
                    popup.appendChild(citeDiv);
                  });
                  return popup.innerHTML;
                });
              }
            }
          });
          </script>
         <!-- /content -->
    
</body></html>