<!DOCTYPE html>
<html lang="en"><head>
<script src="cv_grants_files/libs/clipboard/clipboard.min.js"></script>
<script src="cv_grants_files/libs/quarto-html/quarto.js"></script>
<script src="cv_grants_files/libs/quarto-html/popper.min.js"></script>
<script src="cv_grants_files/libs/quarto-html/tippy.umd.min.js"></script>
<script src="cv_grants_files/libs/quarto-html/anchor.min.js"></script>
<link href="cv_grants_files/libs/quarto-html/tippy.css" rel="stylesheet">
<link href="cv_grants_files/libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="cv_grants_files/libs/bootstrap/bootstrap.min.js"></script>
<link href="cv_grants_files/libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="cv_grants_files/libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light"><meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Prof.&nbsp;Barry Quinn</title>
        <link rel="stylesheet" href="custom-styles.css">
        </head>
<body class="bg-gray-100 fullcontent">
    <header class="bg-white shadow-md p-6 mb-6 flex flex-col md:flex-row justify-between items-center">
        <div>
            <h1 class="text-3xl font-bold text-gray-800">Prof.&nbsp;Barry Quinn</h1>
            <p class="text-xl text-gray-600">Professor of Finance and Financial Technology</p>
        </div>
        <div class="headshot-container mt-4 md:mt-0">
            <img src="img/head_shot.png" alt="Prof.&nbsp;Barry Quinn" class="headshot">
        </div>
    </header>

    <main class="bg-white shadow-md p-6">
        <section id="contact-information" class="level1">
        <h1>Contact Information</h1>
        <ul>
        <li><strong>Address</strong>: Ulster University Business School, Belfast Campus, York Street, Belfast, BT1 5AB, N. Ireland</li>
        <li><strong>Email</strong>: b.quinn1@ulster.ac.uk | <strong>GitHub</strong>: <a href="https://github.com/quinfer">quinfer</a></li>
        </ul>
        </section>
        <section id="research-profile-summary" class="level1">
        <h1>Research Profile Summary</h1>
        <p>Professor of Finance and FinTech with exceptional track record in quantitative finance research, AI applications, and industry collaboration. Research expertise spans systemic risk, market manipulation detection, cooperative finance, and regulatory technology. Strong publication record (14 peer-reviewed papers, 1 ABS4*, 11 ABS3) with over £2M in competitive research funding. Proven ability to translate cutting-edge research into practical applications through extensive industry partnerships.</p>
        <p><strong>Research Interests</strong>: AI applications in finance, market manipulation detection, systemic risk assessment, regulatory technology, cooperative finance, sustainable finance, generative AI in capital markets.</p>
        </section>
        <section id="education-and-professional-qualifications" class="level1">
        <h1>Education and Professional Qualifications</h1>
        <table class="caption-top table">
        <colgroup>
        <col style="width: 30%">
        <col style="width: 23%">
        <col style="width: 5%">
        <col style="width: 39%">
        </colgroup>
        <thead>
        <tr class="header">
        <th style="text-align: left;">Qualification</th>
        <th style="text-align: left;">Institution</th>
        <th style="text-align: left;">Year</th>
        <th style="text-align: left;">Research Relevance</th>
        </tr>
        </thead>
        <tbody>
        <tr class="odd">
        <td style="text-align: left;">Ph.D.&nbsp;Finance</td>
        <td style="text-align: left;">Queen’s University Belfast</td>
        <td style="text-align: left;">2012</td>
        <td style="text-align: left;">Thesis: Cooperative Financial Institutions</td>
        </tr>
        <tr class="even">
        <td style="text-align: left;">MSc Quantitative Finance</td>
        <td style="text-align: left;">RMIT University Melbourne</td>
        <td style="text-align: left;">2006</td>
        <td style="text-align: left;">Advanced derivatives and risk management</td>
        </tr>
        <tr class="odd">
        <td style="text-align: left;">MSc Artificial Intelligence</td>
        <td style="text-align: left;">Queen’s University Belfast</td>
        <td style="text-align: left;">2025*</td>
        <td style="text-align: left;">Current: Deep learning, NLP, computer vision</td>
        </tr>
        <tr class="even">
        <td style="text-align: left;">Chartered Statistician</td>
        <td style="text-align: left;">Royal Statistical Society</td>
        <td style="text-align: left;">2019</td>
        <td style="text-align: left;">Professional statistical expertise</td>
        </tr>
        <tr class="odd">
        <td style="text-align: left;">B.Sc.(Hons) Accounting and Finance</td>
        <td style="text-align: left;">Queen’s University Belfast</td>
        <td style="text-align: left;">1995</td>
        <td style="text-align: left;">First Class Honours</td>
        </tr>
        </tbody>
        </table>
        </section>
        <section id="research-excellence" class="level1">
        <h1>Research Excellence</h1>
        <section id="publication-record-h-index-available-upon-request" class="level2">
        <h2 class="anchored" data-anchor-id="publication-record-h-index-available-upon-request">Publication Record (h-index: Available upon request)</h2>
        <section id="peer-reviewed-publications-14-total" class="level3">
        <h3 class="anchored" data-anchor-id="peer-reviewed-publications-14-total">Peer-Reviewed Publications (14 total)</h3>
        <p><strong>Recent High-Impact Publications:</strong></p>
        <ul>
        <li><p><strong>Liu, Weilong, Zhang, Yong, Liu, Kailong, Quinn, Barry</strong>, Yang, Xingyu, Peng, Qiao (2024). Evolutionary Multi-Objective Optimisation for Large-Scale Portfolio Selection With Both Random and Uncertain Returns. <em>IEEE Transactions on Evolutionary Computation</em> (<strong>ABS4</strong>)</p></li>
        <li><p><strong>McKillop, Donal, Liu, Kailong, Quinn, Barry</strong>, Peng, Qiao (Forthcoming). Modelling and Predicting Credit Union Failures. <em>International Journal of Forecasting</em> (<strong>ABS3</strong>)</p></li>
        <li><p><strong>Bouri, E., Quinn, B., Sheenan, L. &amp; Tang, Y.</strong> (2024). Investigating extreme linkage topology in the aerospace and defence industry. <em>International Review of Financial Analysis</em> (<strong>ABS3</strong>)</p></li>
        <li><p><strong>Quinn, Barry, Gallagher, Ronan, Kuosmanen, Timo</strong> (2023). Lurking in the shadows: The impact of CO2 emissions target setting on carbon pricing in the Kyoto agreement period. <em>Energy Economics</em> (<strong>ABS3</strong>)</p></li>
        </ul>
        </section>
        <section id="software-publications" class="level3">
        <h3 class="anchored" data-anchor-id="software-publications">Software Publications</h3>
        <ul>
        <li><strong>Time Series Econometrics (tsfe)</strong> (2022) - R Package for advanced time series analysis (DOI: 10.5281/zenodo.6376113)</li>
        <li><strong>Financial Machine Learning (fml)</strong> (2020) - R Package for financial ML applications (DOI: 10.5281/zenodo.6376114)</li>
        </ul>
        </section>
        <section id="working-papers-under-review" class="level3">
        <h3 class="anchored" data-anchor-id="working-papers-under-review">Working Papers &amp; Under Review</h3>
        <ul>
        <li><strong>Kearney, Fearghal, Quinn, Barry, Dai, Yongsheng</strong> (2025) <em>Signal Amplification in Market Manipulation Detection</em></li>
        <li><strong>Zhang, Ying (Veronica), Quinn, Barry, Sheenan, Lisa</strong> (2025). <em>Ownership Dynamics, Risk and Regulation in Chinese Banking: New Evidence</em></li>
        <li><strong>Kearney, Fearghal, Quinn, Barry, Pramanick, Abhishek</strong> (Under Review) <em>Innovation Signals and Strategic Exits: How Technological Readiness Shapes RegTech Venture Outcomes</em></li>
        </ul>
        </section>
        </section>
        </section>
        <section id="research-funding-track-record" class="level1">
        <h1>Research Funding Track Record</h1>
        <div class="cell">
        <div id="tbl-grants-detailed" class="cell quarto-float quarto-figure quarto-figure-center anchored">
        <figure class="quarto-float quarto-float-tbl figure">
        <figcaption class="quarto-float-caption-top quarto-float-caption quarto-float-tbl" id="tbl-grants-detailed-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
        Table&nbsp;1: Research Grant Portfolio
        </figcaption>
        <div aria-describedby="tbl-grants-detailed-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
        <div class="cell-output-display">
        <table class="do-not-create-environment cell caption-top table table-sm table-striped small">
        <colgroup>
        <col style="width: 14%">
        <col style="width: 5%">
        <col style="width: 6%">
        <col style="width: 56%">
        <col style="width: 4%">
        <col style="width: 14%">
        </colgroup>
        <thead>
        <tr class="header">
        <th style="text-align: left;">Funding Body</th>
        <th style="text-align: left;">Role</th>
        <th style="text-align: left;">Period</th>
        <th style="text-align: left;">Project Title</th>
        <th style="text-align: left;">Value</th>
        <th style="text-align: left;">Type</th>
        </tr>
        </thead>
        <tbody>
        <tr class="odd">
        <td style="text-align: left;">UKRI/InnovateUK</td>
        <td style="text-align: left;">PI</td>
        <td style="text-align: left;">2024-2025</td>
        <td style="text-align: left;">Understanding and Enhancing regulatory compliance in Investment Management using AI</td>
        <td style="text-align: left;">£NA</td>
        <td style="text-align: left;">Industry Partnership</td>
        </tr>
        <tr class="even">
        <td style="text-align: left;">InnovateUK KTP</td>
        <td style="text-align: left;">PI</td>
        <td style="text-align: left;">2021-2023</td>
        <td style="text-align: left;">Tail Risk Analytics, Stress Testing and Scenario Analytics</td>
        <td style="text-align: left;">£NA</td>
        <td style="text-align: left;">Knowledge Transfer</td>
        </tr>
        <tr class="odd">
        <td style="text-align: left;">InnovateUK KTP</td>
        <td style="text-align: left;">Co-I</td>
        <td style="text-align: left;">2017-2019</td>
        <td style="text-align: left;">AI and Advanced Retail Analytics</td>
        <td style="text-align: left;">£NA</td>
        <td style="text-align: left;">Knowledge Transfer</td>
        </tr>
        <tr class="even">
        <td style="text-align: left;">InnovateUK KTP</td>
        <td style="text-align: left;">Co-I</td>
        <td style="text-align: left;">2021</td>
        <td style="text-align: left;">E.S.G Fair Value Analytics</td>
        <td style="text-align: left;">£NA</td>
        <td style="text-align: left;">Knowledge Transfer</td>
        </tr>
        <tr class="odd">
        <td style="text-align: left;">Industry Partnership</td>
        <td style="text-align: left;">PI</td>
        <td style="text-align: left;">2022-2023</td>
        <td style="text-align: left;">Anomaly detection of large heterogeneous trading data</td>
        <td style="text-align: left;">£NA</td>
        <td style="text-align: left;">Direct Industry</td>
        </tr>
        <tr class="even">
        <td style="text-align: left;">Various</td>
        <td style="text-align: left;">PI/Co-I</td>
        <td style="text-align: left;">2012-2024</td>
        <td style="text-align: left;">Multiple smaller grants and consultancy</td>
        <td style="text-align: left;">£NA</td>
        <td style="text-align: left;">Mixed</td>
        </tr>
        </tbody>
        </table>
        </div>
        </div>
        </figure>
        </div>
        </div>
        <p><strong>Total Research Income</strong>: £1,075,000+ (direct awards as PI/Co-I)<br>
        <strong>Success Rate</strong>: High success rate in competitive funding schemes<br>
        <strong>Industry Leverage</strong>: Strong track record of industry co-funding and partnerships</p>
        </section>
        <section id="research-impact-and-knowledge-transfer" class="level1">
        <h1>Research Impact and Knowledge Transfer</h1>
        <section id="industry-collaborations" class="level2">
        <h2 class="anchored" data-anchor-id="industry-collaborations">Industry Collaborations</h2>
        <ul>
        <li><strong>Funds Axis Ltd</strong> - RegTech and compliance solutions (ongoing)</li>
        <li><strong>Citigroup Belfast</strong> - Market manipulation detection (2022-2023)</li>
        <li><strong>Pearl AI Ltd</strong> - Advanced retail analytics (2017-2019)</li>
        <li><strong>Financial Conduct Authority</strong> - Tech Sprint Mentor (2023-present)</li>
        </ul>
        </section>
        <section id="research-supervision-excellence" class="level2">
        <h2 class="anchored" data-anchor-id="research-supervision-excellence">Research Supervision Excellence</h2>
        <section id="completed-phd-supervisions-6" class="level3">
        <h3 class="anchored" data-anchor-id="completed-phd-supervisions-6">Completed PhD Supervisions (6)</h3>
        <ol type="1">
        <li><strong>Dr.&nbsp;Jiadong Liu</strong> (2018): <em>Momentum in Empirical Asset Pricing</em> - Now research scientist</li>
        <li><strong>Dr.&nbsp;Ashleigh Neil</strong> (2019): <em>Law and Financial Stability</em> - Now policy analyst</li>
        <li><strong>Dr.&nbsp;Colm Kelly</strong> (2021): <em>Machine Learning in Empirical Asset Pricing</em> - Now quant researcher</li>
        <li><strong>Dr.&nbsp;Qiao Peng</strong> (2021): <em>US Credit Union Mergers</em> - Now assistant professor</li>
        <li><strong>Dr.&nbsp;Kevin Johnson</strong> (2019): <em>Industrial Consolidation</em> - Now senior analyst</li>
        <li><strong>Veronica Zhang</strong> (2024): <em>Capital Policy in Chinese Banking</em> - Graduating</li>
        </ol>
        </section>
        <section id="current-phd-supervisions-6" class="level3">
        <h3 class="anchored" data-anchor-id="current-phd-supervisions-6">Current PhD Supervisions (6)</h3>
        <ul>
        <li><strong>Fei Li</strong>: Sustainable Investing and Gender Diversity (QBS scholarship)</li>
        <li><strong>Abhishek Pramanick</strong>: AI and Future of Financial Regulation (QBS scholarship)<br>
        </li>
        <li><strong>Dongwei Li</strong>: Economics of AI Patents in Finance (DofE scholarship)</li>
        <li><strong>Yuqi Ding</strong>: Economics of Generative AI in Finance (QBS scholarship)</li>
        <li><strong>Yongsheng Dai</strong>: Market Manipulation Detection (PWC scholarship)</li>
        <li><strong>Brandon Cochrane</strong>: Economic Cost of Cultural Displays (DofE CAST scholarship)</li>
        </ul>
        </section>
        </section>
        <section id="international-research-network" class="level2">
        <h2 class="anchored" data-anchor-id="international-research-network">International Research Network</h2>
        <ul>
        <li><strong>Visiting PhD Supervisors</strong>: Students from China (SYSU), Ireland (UCD), France (UPEC Paris)</li>
        <li><strong>International Collaborations</strong>: Active research partnerships across Europe, Asia, and North America</li>
        <li><strong>Conference Presentations</strong>: Regular invited speaker at major international conferences</li>
        </ul>
        </section>
        </section>
        <section id="research-infrastructure-and-capabilities" class="level1">
        <h1>Research Infrastructure and Capabilities</h1>
        <section id="technical-expertise" class="level2">
        <h2 class="anchored" data-anchor-id="technical-expertise">Technical Expertise</h2>
        <ul>
        <li><strong>Advanced Statistical Methods</strong>: Time series econometrics, machine learning, deep learning</li>
        <li><strong>Programming Languages</strong>: R (expert), Python (advanced), SQL, MATLAB</li>
        <li><strong>Specialized Software</strong>: Bloomberg Terminal, Reuters, specialized financial databases</li>
        <li><strong>High-Performance Computing</strong>: Experience with cluster computing and big data analytics</li>
        </ul>
        </section>
        <section id="research-facilities" class="level2">
        <h2 class="anchored" data-anchor-id="research-facilities">Research Facilities</h2>
        <ul>
        <li><strong>Queen’s Business School Remote Analytics Lab Platform</strong> (Lead Developer, 2021-2024)</li>
        <li><strong>Finance and AI Research Lab</strong> (Co-director, 2022-2024)</li>
        <li><strong>Ulster University Centre for Financial and Regulatory Technology</strong> (Director, 2024-present)</li>
        </ul>
        </section>
        </section>
        <section id="future-research-directions" class="level1">
        <h1>Future Research Directions</h1>
        <section id="emerging-research-themes" class="level2">
        <h2 class="anchored" data-anchor-id="emerging-research-themes">Emerging Research Themes</h2>
        <ol type="1">
        <li><strong>Generative AI in Capital Markets</strong>: Applications and regulatory implications</li>
        <li><strong>Explainable AI for Financial Regulation</strong>: Transparent algorithmic decision-making</li>
        <li><strong>Systemic Risk in Digital Finance</strong>: Cryptocurrency and DeFi risk assessment</li>
        <li><strong>Sustainable Finance Analytics</strong>: ESG integration and climate risk modeling</li>
        </ol>
        </section>
        <section id="methodology-innovation" class="level2">
        <h2 class="anchored" data-anchor-id="methodology-innovation">Methodology Innovation</h2>
        <ul>
        <li>Integration of large language models with traditional econometric approaches</li>
        <li>Development of hybrid AI systems for financial decision-making</li>
        <li>Advanced causal inference methods for policy evaluation</li>
        </ul>
        </section>
        </section>
        <section id="professional-recognition-and-service" class="level1">
        <h1>Professional Recognition and Service</h1>
        <section id="academic-leadership" class="level2">
        <h2 class="anchored" data-anchor-id="academic-leadership">Academic Leadership</h2>
        <ul>
        <li><strong>Director</strong>, Centre for Financial and Regulatory Technology (2024-present)</li>
        <li><strong>Programme Director</strong>, MSc Quantitative Finance (2018-2022)</li>
        <li><strong>Organizer</strong>, Major symposiums on AI and Financial Regulation</li>
        </ul>
        </section>
        <section id="professional-recognition" class="level2">
        <h2 class="anchored" data-anchor-id="professional-recognition">Professional Recognition</h2>
        <ul>
        <li><strong>Chartered Statistician</strong>, Royal Statistical Society (2019)</li>
        <li><strong>1st Place</strong>, CFA European Quantitative Finance Awards (2018)</li>
        <li><strong>Advanced Data Science Professional</strong> (2024)</li>
        </ul>
        </section>
        <section id="editorial-and-review-activities" class="level2">
        <h2 class="anchored" data-anchor-id="editorial-and-review-activities">Editorial and Review Activities</h2>
        <ul>
        <li>Regular reviewer for major finance and technology journals</li>
        <li>Conference program committee member</li>
        <li>Grant review panels (available upon request)</li>
        </ul>
        <hr>
        <p><strong>Research Philosophy</strong>: Bridging cutting-edge quantitative methods with practical financial applications, maintaining statistical rigor while ensuring real-world relevance and regulatory compliance.</p>
        </section>
        </section>
    </main>

    <footer class="mt-6 text-center">
        <a href="index.pdf" class="download-btn">Download PDF Version</a>
    </footer>

        
        <!-- /main column -->
        <script id="quarto-html-after-body" type="application/javascript">
        window.document.addEventListener("DOMContentLoaded", function (event) {
          const toggleBodyColorMode = (bsSheetEl) => {
            const mode = bsSheetEl.getAttribute("data-mode");
            const bodyEl = window.document.querySelector("body");
            if (mode === "dark") {
              bodyEl.classList.add("quarto-dark");
              bodyEl.classList.remove("quarto-light");
            } else {
              bodyEl.classList.add("quarto-light");
              bodyEl.classList.remove("quarto-dark");
            }
          }
          const toggleBodyColorPrimary = () => {
            const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
            if (bsSheetEl) {
              toggleBodyColorMode(bsSheetEl);
            }
          }
          toggleBodyColorPrimary();  
          const icon = "";
          const anchorJS = new window.AnchorJS();
          anchorJS.options = {
            placement: 'right',
            icon: icon
          };
          anchorJS.add('.anchored');
          const isCodeAnnotation = (el) => {
            for (const clz of el.classList) {
              if (clz.startsWith('code-annotation-')) {                     
                return true;
              }
            }
            return false;
          }
          const onCopySuccess = function(e) {
            // button target
            const button = e.trigger;
            // don't keep focus
            button.blur();
            // flash "checked"
            button.classList.add('code-copy-button-checked');
            var currentTitle = button.getAttribute("title");
            button.setAttribute("title", "Copied!");
            let tooltip;
            if (window.bootstrap) {
              button.setAttribute("data-bs-toggle", "tooltip");
              button.setAttribute("data-bs-placement", "left");
              button.setAttribute("data-bs-title", "Copied!");
              tooltip = new bootstrap.Tooltip(button, 
                { trigger: "manual", 
                  customClass: "code-copy-button-tooltip",
                  offset: [0, -8]});
              tooltip.show();    
            }
            setTimeout(function() {
              if (tooltip) {
                tooltip.hide();
                button.removeAttribute("data-bs-title");
                button.removeAttribute("data-bs-toggle");
                button.removeAttribute("data-bs-placement");
              }
              button.setAttribute("title", currentTitle);
              button.classList.remove('code-copy-button-checked');
            }, 1000);
            // clear code selection
            e.clearSelection();
          }
          const getTextToCopy = function(trigger) {
              const codeEl = trigger.previousElementSibling.cloneNode(true);
              for (const childEl of codeEl.children) {
                if (isCodeAnnotation(childEl)) {
                  childEl.remove();
                }
              }
              return codeEl.innerText;
          }
          const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
            text: getTextToCopy
          });
          clipboard.on('success', onCopySuccess);
          if (window.document.getElementById('quarto-embedded-source-code-modal')) {
            // For code content inside modals, clipBoardJS needs to be initialized with a container option
            // TODO: Check when it could be a function (https://github.com/zenorocha/clipboard.js/issues/860)
            const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
              text: getTextToCopy,
              container: window.document.getElementById('quarto-embedded-source-code-modal')
            });
            clipboardModal.on('success', onCopySuccess);
          }
            var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
            var mailtoRegex = new RegExp(/^mailto:/);
              var filterRegex = new RegExp('/' + window.location.host + '/');
            var isInternal = (href) => {
                return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
            }
            // Inspect non-navigation links and adorn them if external
         	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
            for (var i=0; i<links.length; i++) {
              const link = links[i];
              if (!isInternal(link.href)) {
                // undo the damage that might have been done by quarto-nav.js in the case of
                // links that we want to consider external
                if (link.dataset.originalHref !== undefined) {
                  link.href = link.dataset.originalHref;
                }
              }
            }
          function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
            const config = {
              allowHTML: true,
              maxWidth: 500,
              delay: 100,
              arrow: false,
              appendTo: function(el) {
                  return el.parentElement;
              },
              interactive: true,
              interactiveBorder: 10,
              theme: 'quarto',
              placement: 'bottom-start',
            };
            if (contentFn) {
              config.content = contentFn;
            }
            if (onTriggerFn) {
              config.onTrigger = onTriggerFn;
            }
            if (onUntriggerFn) {
              config.onUntrigger = onUntriggerFn;
            }
            window.tippy(el, config); 
          }
          const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
          for (var i=0; i<noterefs.length; i++) {
            const ref = noterefs[i];
            tippyHover(ref, function() {
              // use id or data attribute instead here
              let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
              try { href = new URL(href).hash; } catch {}
              const id = href.replace(/^#\/?/, "");
              const note = window.document.getElementById(id);
              if (note) {
                return note.innerHTML;
              } else {
                return "";
              }
            });
          }
          const xrefs = window.document.querySelectorAll('a.quarto-xref');
          const processXRef = (id, note) => {
            // Strip column container classes
            const stripColumnClz = (el) => {
              el.classList.remove("page-full", "page-columns");
              if (el.children) {
                for (const child of el.children) {
                  stripColumnClz(child);
                }
              }
            }
            stripColumnClz(note)
            if (id === null || id.startsWith('sec-')) {
              // Special case sections, only their first couple elements
              const container = document.createElement("div");
              if (note.children && note.children.length > 2) {
                container.appendChild(note.children[0].cloneNode(true));
                for (let i = 1; i < note.children.length; i++) {
                  const child = note.children[i];
                  if (child.tagName === "P" && child.innerText === "") {
                    continue;
                  } else {
                    container.appendChild(child.cloneNode(true));
                    break;
                  }
                }
                if (window.Quarto?.typesetMath) {
                  window.Quarto.typesetMath(container);
                }
                return container.innerHTML
              } else {
                if (window.Quarto?.typesetMath) {
                  window.Quarto.typesetMath(note);
                }
                return note.innerHTML;
              }
            } else {
              // Remove any anchor links if they are present
              const anchorLink = note.querySelector('a.anchorjs-link');
              if (anchorLink) {
                anchorLink.remove();
              }
              if (window.Quarto?.typesetMath) {
                window.Quarto.typesetMath(note);
              }
              // TODO in 1.5, we should make sure this works without a callout special case
              if (note.classList.contains("callout")) {
                return note.outerHTML;
              } else {
                return note.innerHTML;
              }
            }
          }
          for (var i=0; i<xrefs.length; i++) {
            const xref = xrefs[i];
            tippyHover(xref, undefined, function(instance) {
              instance.disable();
              let url = xref.getAttribute('href');
              let hash = undefined; 
              if (url.startsWith('#')) {
                hash = url;
              } else {
                try { hash = new URL(url).hash; } catch {}
              }
              if (hash) {
                const id = hash.replace(/^#\/?/, "");
                const note = window.document.getElementById(id);
                if (note !== null) {
                  try {
                    const html = processXRef(id, note.cloneNode(true));
                    instance.setContent(html);
                  } finally {
                    instance.enable();
                    instance.show();
                  }
                } else {
                  // See if we can fetch this
                  fetch(url.split('#')[0])
                  .then(res => res.text())
                  .then(html => {
                    const parser = new DOMParser();
                    const htmlDoc = parser.parseFromString(html, "text/html");
                    const note = htmlDoc.getElementById(id);
                    if (note !== null) {
                      const html = processXRef(id, note);
                      instance.setContent(html);
                    } 
                  }).finally(() => {
                    instance.enable();
                    instance.show();
                  });
                }
              } else {
                // See if we can fetch a full url (with no hash to target)
                // This is a special case and we should probably do some content thinning / targeting
                fetch(url)
                .then(res => res.text())
                .then(html => {
                  const parser = new DOMParser();
                  const htmlDoc = parser.parseFromString(html, "text/html");
                  const note = htmlDoc.querySelector('main.content');
                  if (note !== null) {
                    // This should only happen for chapter cross references
                    // (since there is no id in the URL)
                    // remove the first header
                    if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
                      note.children[0].remove();
                    }
                    const html = processXRef(null, note);
                    instance.setContent(html);
                  } 
                }).finally(() => {
                  instance.enable();
                  instance.show();
                });
              }
            }, function(instance) {
            });
          }
              let selectedAnnoteEl;
              const selectorForAnnotation = ( cell, annotation) => {
                let cellAttr = 'data-code-cell="' + cell + '"';
                let lineAttr = 'data-code-annotation="' +  annotation + '"';
                const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
                return selector;
              }
              const selectCodeLines = (annoteEl) => {
                const doc = window.document;
                const targetCell = annoteEl.getAttribute("data-target-cell");
                const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
                const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
                const lines = annoteSpan.getAttribute("data-code-lines").split(",");
                const lineIds = lines.map((line) => {
                  return targetCell + "-" + line;
                })
                let top = null;
                let height = null;
                let parent = null;
                if (lineIds.length > 0) {
                    //compute the position of the single el (top and bottom and make a div)
                    const el = window.document.getElementById(lineIds[0]);
                    top = el.offsetTop;
                    height = el.offsetHeight;
                    parent = el.parentElement.parentElement;
                  if (lineIds.length > 1) {
                    const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
                    const bottom = lastEl.offsetTop + lastEl.offsetHeight;
                    height = bottom - top;
                  }
                  if (top !== null && height !== null && parent !== null) {
                    // cook up a div (if necessary) and position it 
                    let div = window.document.getElementById("code-annotation-line-highlight");
                    if (div === null) {
                      div = window.document.createElement("div");
                      div.setAttribute("id", "code-annotation-line-highlight");
                      div.style.position = 'absolute';
                      parent.appendChild(div);
                    }
                    div.style.top = top - 2 + "px";
                    div.style.height = height + 4 + "px";
                    div.style.left = 0;
                    let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
                    if (gutterDiv === null) {
                      gutterDiv = window.document.createElement("div");
                      gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
                      gutterDiv.style.position = 'absolute';
                      const codeCell = window.document.getElementById(targetCell);
                      const gutter = codeCell.querySelector('.code-annotation-gutter');
                      gutter.appendChild(gutterDiv);
                    }
                    gutterDiv.style.top = top - 2 + "px";
                    gutterDiv.style.height = height + 4 + "px";
                  }
                  selectedAnnoteEl = annoteEl;
                }
              };
              const unselectCodeLines = () => {
                const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
                elementsIds.forEach((elId) => {
                  const div = window.document.getElementById(elId);
                  if (div) {
                    div.remove();
                  }
                });
                selectedAnnoteEl = undefined;
              };
                // Handle positioning of the toggle
            window.addEventListener(
              "resize",
              throttle(() => {
                elRect = undefined;
                if (selectedAnnoteEl) {
                  selectCodeLines(selectedAnnoteEl);
                }
              }, 10)
            );
            function throttle(fn, ms) {
            let throttle = false;
            let timer;
              return (...args) => {
                if(!throttle) { // first call gets through
                    fn.apply(this, args);
                    throttle = true;
                } else { // all the others get throttled
                    if(timer) clearTimeout(timer); // cancel #2
                    timer = setTimeout(() => {
                      fn.apply(this, args);
                      timer = throttle = false;
                    }, ms);
                }
              };
            }
              // Attach click handler to the DT
              const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
              for (const annoteDlNode of annoteDls) {
                annoteDlNode.addEventListener('click', (event) => {
                  const clickedEl = event.target;
                  if (clickedEl !== selectedAnnoteEl) {
                    unselectCodeLines();
                    const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
                    if (activeEl) {
                      activeEl.classList.remove('code-annotation-active');
                    }
                    selectCodeLines(clickedEl);
                    clickedEl.classList.add('code-annotation-active');
                  } else {
                    // Unselect the line
                    unselectCodeLines();
                    clickedEl.classList.remove('code-annotation-active');
                  }
                });
              }
          const findCites = (el) => {
            const parentEl = el.parentElement;
            if (parentEl) {
              const cites = parentEl.dataset.cites;
              if (cites) {
                return {
                  el,
                  cites: cites.split(' ')
                };
              } else {
                return findCites(el.parentElement)
              }
            } else {
              return undefined;
            }
          };
          var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
          for (var i=0; i<bibliorefs.length; i++) {
            const ref = bibliorefs[i];
            const citeInfo = findCites(ref);
            if (citeInfo) {
              tippyHover(citeInfo.el, function() {
                var popup = window.document.createElement('div');
                citeInfo.cites.forEach(function(cite) {
                  var citeDiv = window.document.createElement('div');
                  citeDiv.classList.add('hanging-indent');
                  citeDiv.classList.add('csl-entry');
                  var biblioDiv = window.document.getElementById('ref-' + cite);
                  if (biblioDiv) {
                    citeDiv.innerHTML = biblioDiv.innerHTML;
                  }
                  popup.appendChild(citeDiv);
                });
                return popup.innerHTML;
              });
            }
          }
        });
        </script>
         <!-- /content -->
    
</body></html>